---
const today = new Date();
import { Image } from 'astro:assets';
import WechatIcon from '../../assets/img/IcSharpWechat.svg';
import TwitterXIcon from '../../assets/img/RiTwitterXFill.svg';
import XiaohongshuIcon from '../../assets/img/SimpleIconsXiaohongshu.svg';
import BuyMeACoffeeIcon from '../../assets/img/SimpleIconsBuymeacoffee.svg';
import RssIcon from '../../assets/img/SiGlyphRss.svg';
---

<footer class='container mt-8'>
	<div class='justify-center flex gap-6 py-8 prose dark:prose-invert text-sm'>
		<button
			class='social-icon wechat'
			aria-label='微信'
			onclick='showWechatModal()'
		>
			<Image src={WechatIcon} alt='微信' width={24} height={24} />
		</button>
		<a href='https://x.com/qzcanoe' target='_blank' class='social-icon twitter' aria-label='X'>
			<Image src={TwitterXIcon} alt='X' width={24} height={24} />
		</a>
		<a
			href='https://www.xiaohongshu.com/user/profile/5c3c149800000000060372e6'
			target='_blank'
			class='social-icon xiaohongshu'
			aria-label='小红书'
		>
			<Image src={XiaohongshuIcon} alt='小红书' width={26} height={24} />
		</a>
		<a href='https://buymeacoffee.com/xcanoe' target='_blank' class='social-icon buyme' aria-label='Buy me a Coffee'>
			<Image src={BuyMeACoffeeIcon} alt='Buy me a Coffee' width={24} height={24} />
		</a>
		<a href='/rss.xml' target='_blank' class='social-icon rss' aria-label='RSS'>
			<Image src={RssIcon} alt='RSS' width={20} height={20} />
		</a>
	</div>

	<div class='py-4 border-t dark:border-t-zinc-800'>
		<div class='md:flex text-sm text-zinc-500 dark:text-zinc-300 prose dark:prose-invert justify-between'>
			<div>Copyright © {today.getFullYear()} Canoe.</div>
		</div>
	</div>
</footer>

<style>
	.social-icon {
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0.8;
		transition:
			opacity 0.3s ease,
			transform 0.3s ease;
	}

	.social-icon:hover {
		opacity: 1;
		transform: translateY(-2px);
	}

	.social-icon img {
		filter: grayscale(100%);
		transition: filter 0.3s ease;
	}

	:global(.dark) .social-icon img {
		filter: invert(1) grayscale(100%);
	}

	.social-icon:hover img {
		filter: none;
	}

	.wechat:hover img {
		filter: brightness(0) saturate(100%) invert(58%) sepia(81%) saturate(549%) hue-rotate(98deg) brightness(93%) contrast(98%);
	}

	.twitter:hover img {
		filter: brightness(0) saturate(100%) invert(48%) sepia(99%) saturate(1752%) hue-rotate(183deg) brightness(101%) contrast(91%);
	}

	.xiaohongshu:hover img {
		filter: brightness(0) saturate(100%) invert(34%) sepia(65%) saturate(3820%) hue-rotate(330deg) brightness(98%) contrast(97%);
	}

	.buyme:hover img {
		filter: brightness(0) saturate(100%) invert(83%) sepia(53%) saturate(979%) hue-rotate(358deg) brightness(103%) contrast(105%);
	}

	.rss:hover img {
		filter: brightness(0) saturate(100%) invert(54%) sepia(91%) saturate(1304%) hue-rotate(359deg) brightness(99%) contrast(106%);
	}

	:global(.dark) .wechat:hover img {
		filter: brightness(0) saturate(100%) invert(58%) sepia(81%) saturate(549%) hue-rotate(98deg) brightness(93%) contrast(98%);
	}

	:global(.dark) .twitter:hover img {
		filter: brightness(0) saturate(100%) invert(48%) sepia(99%) saturate(1752%) hue-rotate(183deg) brightness(101%) contrast(91%);
	}

	:global(.dark) .xiaohongshu:hover img {
		filter: brightness(0) saturate(100%) invert(34%) sepia(65%) saturate(3820%) hue-rotate(330deg) brightness(98%) contrast(97%);
	}

	:global(.dark) .buyme:hover img {
		filter: brightness(0) saturate(100%) invert(83%) sepia(53%) saturate(979%) hue-rotate(358deg) brightness(103%) contrast(105%);
	}

	:global(.dark) .rss:hover img {
		filter: brightness(0) saturate(100%) invert(54%) sepia(91%) saturate(1304%) hue-rotate(359deg) brightness(99%) contrast(106%);
	}

	/* 微信浮窗样式 */
	.wechat-modal {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.7);
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 1000;
		opacity: 0;
		visibility: hidden;
		transition: opacity 0.3s ease, visibility 0.3s ease;
	}

	.wechat-modal.show {
		opacity: 1;
		visibility: visible;
	}

	.wechat-modal-content {
		position: relative;
		background-color: white;
		border-radius: 12px;
		padding: 20px;
		box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
		max-width: 90%;
		max-height: 90%;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	:global(.dark) .wechat-modal-content {
		background-color: #1f2937;
		color: white;
	}

	.wechat-modal-content img {
		border-radius: 8px;
		max-width: 100%;
		height: auto;
	}

	.wechat-modal-close {
		position: absolute;
		top: 10px;
		right: 15px;
		background: none;
		border: none;
		font-size: 24px;
		cursor: pointer;
		color: #666;
		font-weight: bold;
		line-height: 1;
		padding: 0;
		width: 30px;
		height: 30px;
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: 50%;
		transition: background-color 0.2s ease;
	}

	.wechat-modal-close:hover {
		background-color: #f0f0f0;
	}

	:global(.dark) .wechat-modal-close {
		color: #ccc;
	}

	:global(.dark) .wechat-modal-close:hover {
		background-color: #374151;
	}

	.wechat-modal-title {
		margin-bottom: 15px;
		font-size: 16px;
		font-weight: 600;
		color: #333;
	}

	:global(.dark) .wechat-modal-title {
		color: #f9fafb;
	}
</style>

<!-- 微信浮窗 -->
<div id="wechat-modal" class="wechat-modal">
	<div class="wechat-modal-content">
		<button class="wechat-modal-close" onclick="hideWechatModal()">&times;</button>
		<div class="wechat-modal-title">微信扫码关注</div>
		<img src="/wechat.png" alt="微信二维码" />
	</div>
</div>

<script>
	function showWechatModal() {
		const modal = document.getElementById('wechat-modal');
		if (modal) {
			modal.classList.add('show');
			document.body.style.overflow = 'hidden';
		}
	}

	function hideWechatModal() {
		const modal = document.getElementById('wechat-modal');
		if (modal) {
			modal.classList.remove('show');
			document.body.style.overflow = 'auto';
		}
	}

	// 点击背景关闭浮窗
	const modal = document.getElementById('wechat-modal');
	if (modal) {
		modal.addEventListener('click', function(e) {
			if (e.target === this) {
				hideWechatModal();
			}
		});
	}

	// ESC键关闭浮窗
	document.addEventListener('keydown', function(e) {
		if (e.key === 'Escape') {
			hideWechatModal();
		}
	});

	// 将函数绑定到全局作用域
	(window as any).showWechatModal = showWechatModal;
	(window as any).hideWechatModal = hideWechatModal;
</script>
